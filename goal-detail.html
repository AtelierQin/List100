<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal Detail - List100</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;1,400;1,500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/global.css">
    <link rel="stylesheet" href="assets/css/goal-detail.css">
</head>

<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="landing.html" class="logo">FutureCast</a>
            <div class="nav-links">
                <a href="list100.html" class="nav-link">List100</a>
                <div class="dropdown">
                    <button class="dropdown-toggle">Tours</button>
                    <div class="dropdown-menu">
                        <a href="world.html" class="dropdown-item">World</a>
                        <a href="china.html" class="dropdown-item">China</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="dropdown-toggle">Collections</button>
                    <div class="dropdown-menu">
                        <a href="imdb-top-250.html" class="dropdown-item">IMDb Top 250</a>
                        <a href="dg120.html" class="dropdown-item">DG 120</a>
                        <a href="thu-book-list.html" class="dropdown-item">THU Book List</a>
                    </div>
                </div>
                <a href="OS.html" class="nav-link">OS</a>
                <a href="landing.html#about" class="nav-link">About</a>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="goal-layout">
                <!-- Â∑¶‰æß‰∏ªË¶ÅÂÜÖÂÆπ -->
                <div class="goal-main">
                    <div class="goal-header">
                        <div class="goal-number" id="goalNumber">#1</div>
                        <div class="goal-title-section">
                            <input type="text" class="goal-title" id="goalTitle" placeholder="Enter your goal title...">
                            <div class="goal-meta">
                                <span class="created-date" id="createdDate">Created on March 15, 2024</span>
                                <div class="completion-date-wrapper hidden" id="completionDateSection">
                                    <div class="completion-date">
                                        <span>Completed on </span>
                                        <input type="date" class="completion-date-input" id="completionDateInput"
                                            title="You can set any date, including dates before you created goal if you completed it earlier">
                                    </div>
                                    <small class="date-hint">üí° You can record goals completed before adding them to
                                        your list</small>
                                </div>
                            </div>
                        </div>
                        <button class="complete-toggle" id="completeToggle">
                            <span class="toggle-icon">‚úì</span>
                            <span class="toggle-text">Mark Complete</span>
                        </button>
                    </div>

                    <div class="goal-tabs">
                        <button class="tab-btn active" data-tab="overview">Overview</button>
                        <button class="tab-btn" data-tab="plan">Plan</button>
                        <button class="tab-btn" data-tab="journal">Journal</button>
                    </div>

                    <div class="goal-content">
                        <!-- Overview Tab -->
                        <div class="tab-pane active" id="tab-overview">
                            <div class="description-section">
                                <h3>Description</h3>
                                <textarea class="goal-description" id="goalDescription"
                                    placeholder="Add a detailed description of your goal, why it matters to you, and what success looks like..."></textarea>
                            </div>

                            <div class="tags-section">
                                <h3>Tags</h3>
                                <div class="tags-container">
                                    <div class="tags-display" id="tagsDisplay"></div>
                                    <button class="add-tag-btn" id="addTagBtn">+ Add Tag</button>
                                    <input type="text" class="tag-input hidden" id="tagInput"
                                        placeholder="Enter tags separated by commas...">
                                </div>
                            </div>

                            <div class="resources-section">
                                <div class="section-header">
                                    <h3>Knowledge & Resources</h3>
                                    <button class="add-resource-btn" id="addResourceBtn">
                                        <span class="btn-icon">+</span> Add Resource
                                    </button>
                                </div>
                                <div class="resources-list" id="resourcesList">
                                    <div class="empty-state-small">
                                        <p>Link books or tours to this goal.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Plan Tab (New) -->
                        <div class="tab-pane" id="tab-plan">
                            <div class="milestones-section">
                                <div class="section-header">
                                    <div class="header-left">
                                        <h3>Milestones</h3>
                                        <span class="milestone-count" id="milestoneCount">0/0</span>
                                    </div>
                                    <div class="progress-container">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="milestoneProgress" style="width: 0%"></div>
                                        </div>
                                        <span class="progress-text" id="progressText">0%</span>
                                    </div>
                                </div>

                                <div class="milestones-list" id="milestonesList">
                                    <!-- Milestones will be injected here -->
                                </div>

                                <div class="add-milestone-wrapper">
                                    <button class="add-milestone-btn" id="showAddMilestoneBtn">
                                        <span class="icon">+</span> Add Milestone
                                    </button>
                                    <div class="add-milestone-form hidden" id="addMilestoneForm">
                                        <div class="form-row">
                                            <input type="text" class="milestone-input" id="newMilestoneTitle"
                                                placeholder="What needs to be done?">
                                            <input type="date" class="milestone-date" id="newMilestoneDate">
                                        </div>
                                        <div class="form-actions">
                                            <button class="btn-cancel" id="cancelMilestoneBtn">Cancel</button>
                                            <button class="btn-save" id="saveMilestoneBtn">Add Milestone</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="habits-section-divider"></div>

                            <!-- Habits Section -->
                            <div class="habits-section">
                                <div class="section-header">
                                    <div class="header-left">
                                        <h3>Habits & Routines</h3>
                                    </div>
                                </div>

                                <div class="habits-list" id="habitsList">
                                    <!-- Habits will be injected here -->
                                </div>

                                <div class="add-habit-wrapper">
                                    <button class="add-milestone-btn" id="showAddHabitBtn">
                                        <span class="icon">+</span> Add Habit
                                    </button>
                                    <div class="add-habit-form hidden" id="addHabitForm">
                                        <div class="form-row">
                                            <input type="text" class="habit-input" id="newHabitTitle"
                                                placeholder="Build a habit (e.g., Read 30 mins daily)">
                                            <select class="habit-frequency" id="newHabitFrequency">
                                                <option value="daily">Daily</option>
                                                <option value="weekly">Weekly</option>
                                            </select>
                                        </div>
                                        <div class="form-actions">
                                            <button class="btn-cancel" id="cancelHabitBtn">Cancel</button>
                                            <button class="btn-save" id="saveHabitBtn">Add Habit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Journal Tab (Formerly Notes) -->
                        <div class="tab-pane" id="tab-journal">
                            <div class="notes-section">
                                <h3>Notes & Progress</h3>
                                <div class="note-controls">
                                    <select id="noteMilestoneSelect" class="note-milestone-select">
                                        <option value="">General Update</option>
                                        <!-- Steps will be populated by JS -->
                                    </select>
                                </div>
                                <textarea class="note-input" id="noteInput"
                                    placeholder="Add a note about your progress, thoughts, or next steps..."></textarea>
                                <div class="note-attachments" id="noteAttachments"></div>
                                <div class="note-actions">
                                    <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                                    <button class="attach-btn" id="attachPhotoBtn">üì∑ Add Photo</button>
                                    <button class="attach-btn" id="attachLinkBtn">üîó Add Link</button>
                                    <button class="attach-btn" id="generateReviewBtn"
                                        style="color: var(--color-accent); border-color: var(--color-accent);">‚ö°Ô∏è Weekly
                                        Review</button>
                                    <button class="add-note-btn" id="addNoteBtn">Add Note</button>
                                </div>
                            </div>
                            <div class="notes-divider"></div>
                            <div class="notes-list" id="notesList"></div>
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßËæπÊ†è -->
                <div class="goal-sidebar">
                    <div class="stats-card">
                        <h3>Statistics</h3>
                        <div class="stat-item">
                            <span class="stat-label">Days Active</span>
                            <span class="stat-value" id="daysActive">5</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Notes Added</span>
                            <span class="stat-value" id="notesCount">3</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Last Updated</span>
                            <span class="stat-value" id="lastUpdated">2 hours ago</span>
                        </div>
                    </div>

                    <div class="actions-card">
                        <h3>Actions</h3>
                        <button class="action-btn btn-primary" id="backToListBtn">
                            <span class="btn-icon">‚Üê</span>
                            Back to List100
                        </button>
                        <button class="action-btn btn-ghost" id="exportGoalBtn">
                            <span class="btn-icon">üíæ</span>
                            Backup Goal Data
                        </button>
                        <button class="action-btn btn-ghost" id="shareBtn">
                            <span class="btn-icon">üì§</span>
                            Copy Goal Text
                        </button>
                        <button class="action-btn btn-danger" id="deleteBtn">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Delete Goal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <!-- Resource Selection Modal -->
    <div class="modal hidden" id="resourceModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Link Resource</h3>
                <button class="modal-close" id="closeResourceModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="resource-tabs">
                    <button class="resource-tab active" data-type="books">Books (THU)</button>
                    <button class="resource-tab" data-type="tours">Tours (World)</button>
                </div>
                <div class="resource-search">
                    <input type="text" placeholder="Search collections..." id="resourceSearchInput"
                        style="width: 100%; margin-bottom: 12px; padding: 8px; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm);">
                </div>
                <div class="resource-results" id="resourceResults" style="max-height: 300px; overflow-y: auto;">
                    <!-- Results injected here -->
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/thu-book-list.js"></script>
    <script src="assets/js/goal-detail.js"></script>
    <script src="assets/js/dropdown.js"></script>
</body>

</html>